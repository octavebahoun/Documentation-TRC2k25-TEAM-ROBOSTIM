---
id: ros-test3
slug: Test3
title: "Test 3 ‚Äî Navigation Autonome avec ROS 2"
sidebar_label: Test 3
---

import InfoCard from "@site/src/components/InfoCard";
import FeatureGrid from "@site/src/components/FeatureGrid";
import Table from "@site/src/components/Table";

## Documentation technique des tests en IT <span className="badge-sticker badge-it">ü§ñ ROS 2</span>

<div
  className="hero-section"
  style={{ minHeight: "40vh", marginBottom: "2rem" }}
>
  <div
    style={{
      display: "flex",
      flexDirection: "column",
      alignItems: "center",
      justifyContent: "center",
      textAlign: "center",
      position: "relative",
      zIndex: 10,
    }}
  >
    <h1 style={{ fontSize: "2.5rem", marginBottom: "1rem" }}>
      Navigation Autonome avec Pathfinding
    </h1>
    <p style={{ fontSize: "1.2rem", marginBottom: "2rem" }}>
      <strong>Test 3 :</strong> Utilisation de ROS 2, Gazebo et RViz pour une
      navigation autonome
    </p>
    <div
      style={{
        display: "flex",
        flexDirection: "column",
        gap: "1rem",
        justifyContent: "center",
        alignItems: "center",
        flexWrap: "wrap",
        position: "relative",
        zIndex: 10,
      }}
    >
      <a
        href="#presentation"
        className="hero-btn-primary cursor-pointer"
        style={{ position: "relative", zIndex: 10 }}
      >
        üìñ Commencer la lecture
      </a>
      <a
        href="/Documentation-TRC2k25-TEAM-ROBOSTIM/img/ros/vid.mp4"
        target="_blank"
        className="hero-btn-outline cursor-pointer"
        style={{ position: "relative", zIndex: 10 }}
      >
        üé• Voir la d√©mo
      </a>
    </div>
  </div>
</div>

---

## 1. Pr√©sentation G√©n√©rale {#presentation}

<InfoCard type="info" title="Objectif du projet" icon="üéØ">
  D√©velopper un syst√®me de navigation autonome pour un robot mobile simul√©
  (TekBot) dans l'environnement Gazebo, en utilisant ROS 2 (Humble).
</InfoCard>

Ce projet a pour objectif de d√©velopper un syst√®me de navigation autonome pour un robot mobile simul√© (TekBot) dans l'environnement Gazebo, en utilisant ROS 2 (Humble). Le TekBot est un robot √©quip√© de capteurs permettant de s'orienter dans un environnement simul√©, tel qu'un labyrinthe.

√Ä travers ce projet, nous avons voulu simuler une navigation compl√®te comprenant :

- La planification de trajectoire (pathfinding)
- Le suivi du chemin
- L'√©vitement d'obstacles
- La visualisation en temps r√©el dans RViz2

### Comp√©tences cl√©s d√©velopp√©es

<FeatureGrid
  items={[
    {
      icon: "ü§ñ",
      title: "ROS 2",
      description: "Compr√©hension et manipulation de ROS 2",
    },
    {
      icon: "üì°",
      title: "LIDAR",
      description: "Utilisation de capteurs pour d√©tecter l'environnement",
    },
    {
      icon: "üéÆ",
      title: "Gazebo",
      description: "Int√©gration de simulations complexes",
    },
    {
      icon: "üìä",
      title: "Odom√©trie",
      description: "Traitement pour le suivi de position",
    },
    {
      icon: "üó∫Ô∏è",
      title: "Cartographie",
      description: "G√©n√©ration de cartes pour la navigation",
    },
  ]}
/>

<div style={{ textAlign: "center", margin: "2rem 0" }}>
  <p>
    <strong>Arborescence finale du dossier ros2_ws/src/</strong>
  </p>
  <img
    src="/Documentation-TRC2k25-TEAM-ROBOSTIM/img/ros/abo.png"
    alt="Arborescence du projet"
    style={{
      maxWidth: "100%",
      borderRadius: "8px",
      boxShadow: "0 4px 6px rgba(0,0,0,0.1)",
    }}
  />
  <p style={{ fontSize: "0.9rem", marginTop: "0.5rem" }}>
    üî∫ Cliquer sur l'image pour agrandir
  </p>
</div>

---

## 2. Configuration de l'Environnement {#configuration}

Pour mettre en place le projet de navigation autonome TekBot dans un environnement ROS 2, il est essentiel de disposer d'une configuration logicielle rigoureuse.

### Pr√©requis

<Table
  headers={["Composant", "Version", "Description"]}
  data={[
    ["ROS 2", "Humble", "Distribution ROS 2 stable"],
    ["Ubuntu", "22.04", "Syst√®me d'exploitation recommand√©"],
    ["Gazebo", "Classic", "Simulateur 3D"],
    ["RViz2", "-", "Outil de visualisation"],
    ["Python", "3.10", "Langage de programmation"],
  ]}
/>

### Packages ROS 2

Le projet s'articule autour de plusieurs packages :

- **`pathfinding_robot`** : Package principal contenant tous les scripts relatifs √† l'intelligence du robot (algorithme A\*, suivi de chemin, √©vitement d'obstacles)
- **`tekbot_sim`** : Base logicielle incluant la d√©finition du robot (URDF), les contr√¥leurs, et les mondes simul√©s

### Installation

#### √âtape 1 : Cloner les d√©p√¥ts

```bash
cd ~/ros2_ws/src
git clone https://github.com/charif-tekbot/tekbot_sim.git
# Cloner √©galement votre d√©p√¥t pathfinding_robot
```

#### √âtape 2 : Compiler les packages

```bash
cd ~/ros2_ws
colcon build
source install/setup.bash
```

<InfoCard type="warning" title="Important" icon="‚ö†Ô∏è">
  Assurez-vous d'utiliser Python 3.10 avec ROS 2 Humble et que tous les packages
  requis (`nav_msgs`, `geometry_msgs`, `rclpy`) sont bien install√©s.
</InfoCard>

---

## 3. Structure du package pathfinding_robot {#structure}

Le package `pathfinding_robot` constitue le c≈ìur logique du syst√®me de navigation autonome. Il est structur√© selon les standards ROS 2 pour assurer modularit√©, clart√© et extensibilit√©.

### Organisation des r√©pertoires

```
pathfinding_robot/
‚îú‚îÄ‚îÄ launch/
‚îÇ   ‚îî‚îÄ‚îÄ simulation.launch.py
‚îú‚îÄ‚îÄ path_planner/
‚îÇ   ‚îî‚îÄ‚îÄ path_planner_node.py
‚îú‚îÄ‚îÄ path_follower/
‚îÇ   ‚îî‚îÄ‚îÄ path_follower_node.py
‚îú‚îÄ‚îÄ rviz/
‚îÇ   ‚îî‚îÄ‚îÄ pathfinding_config.rviz
‚îú‚îÄ‚îÄ package.xml
‚îî‚îÄ‚îÄ setup.py
```

### Composants principaux

#### üìÅ `launch/`

Contient `simulation.launch.py` qui d√©marre simultan√©ment :

- Le monde Gazebo
- Le mod√®le du robot TekBot
- Les n≈ìuds de planification et de suivi

#### üìÅ `path_planner/`

Script `path_planner_node.py` impl√©mentant l'algorithme A\* pour g√©n√©rer le chemin optimal. Publie sur le topic `/planned_path`.

#### üìÅ `path_follower/`

N≈ìud `path_follower_node.py` responsable du suivi du chemin. Lit `/planned_path` et compare avec `/odom` pour ajuster les vitesses.

#### üìÅ `rviz/`

Configuration `pathfinding_config.rviz` pour afficher le robot, capteurs, chemin planifi√©, TF et odom√©trie.

<div style={{ textAlign: "center", margin: "2rem 0" }}>
  <p>
    <strong>Contenu du fichier simulation.launch.py</strong>
  </p>
  <img
    src="/Documentation-TRC2k25-TEAM-ROBOSTIM/img/ros/3.png"
    alt="simulation.launch.py"
    style={{ maxWidth: "100%", borderRadius: "8px", marginBottom: "1rem" }}
  />

{" "}

<p>
  <strong>Contenu du fichier package.xml</strong>
</p>
<img
  src="/Documentation-TRC2k25-TEAM-ROBOSTIM/img/ros/pac.png"
  alt="package.xml"
  style={{ maxWidth: "100%", borderRadius: "8px", marginBottom: "1rem" }}
/>

  <p>
    <strong>Contenu du fichier setup.py</strong>
  </p>
  <img
    src="/Documentation-TRC2k25-TEAM-ROBOSTIM/img/ros/s.png"
    alt="setup.py"
    style={{ maxWidth: "100%", borderRadius: "8px" }}
  />
</div>

---

## 4. Algorithme de Pathfinding (A\*)

L'algorithme A\* impl√©ment√© dans `path_planner_node.py` est un classique en intelligence artificielle pour la recherche de chemin.

### Principe de fonctionnement

L'algorithme repose sur une repr√©sentation de l'environnement sous forme de grille, o√π chaque cellule est soit traversable, soit occup√©e. Il √©value un co√ªt :

**f(n) = g(n) + h(n)**

O√π :

- **g(n)** : co√ªt r√©el depuis le d√©part
- **h(n)** : estimation heuristique de la distance vers la cible

### Processus

1. Construction d'une file de priorit√© ("open list")
2. S√©lection du n≈ìud le plus prometteur √† chaque it√©ration
3. Stockage des cellules explor√©es dans une "closed list"
4. Reconstruction du chemin en suivant les parents

### Publication du chemin

Le n≈ìud publie le chemin sous forme de message `nav_msgs/Path` contenant une liste de `geometry_msgs/PoseStamped`.

<div style={{ textAlign: "center", margin: "2rem 0" }}>
  <p>
    <strong>Contenu du fichier path_planner_node.py</strong>
  </p>
  <img
    src="/Documentation-TRC2k25-TEAM-ROBOSTIM/img/ros/pl1.png"
    alt="path_planner 1"
    style={{ maxWidth: "100%", borderRadius: "8px", marginBottom: "1rem" }}
  />
  <img
    src="/Documentation-TRC2k25-TEAM-ROBOSTIM/img/ros/pl2.png"
    alt="path_planner 2"
    style={{ maxWidth: "100%", borderRadius: "8px", marginBottom: "1rem" }}
  />
  <img
    src="/Documentation-TRC2k25-TEAM-ROBOSTIM/img/ros/pl3.png"
    alt="path_planner 3"
    style={{ maxWidth: "100%", borderRadius: "8px" }}
  />
</div>

---

## 5. Suivi de Chemin (Path Following)

Le suivi de chemin est r√©alis√© dans le n≈ìud `path_follower_node.py`.

### Fonctionnement

Le n≈ìud re√ßoit :

- La s√©quence de positions via `/planned_path`
- La position actuelle via `/odom`

### Strat√©gie de suivi

1. **R√©alignement** : Si l'angle entre la direction actuelle et la cible est trop important, le robot pivote
2. **Avancement** : Si l'angle est faible, le robot avance
3. **Tol√©rance** : 20 cm pour consid√©rer qu'un waypoint est atteint

<div style={{ textAlign: "center", margin: "2rem 0" }}>
  <p>
    <strong>Contenu du fichier path_follower_node.py</strong>
  </p>
  <img
    src="/Documentation-TRC2k25-TEAM-ROBOSTIM/img/ros/4.png"
    alt="path_follower 1"
    style={{ maxWidth: "100%", borderRadius: "8px", marginBottom: "1rem" }}
  />
  <img
    src="/Documentation-TRC2k25-TEAM-ROBOSTIM/img/ros/5.png"
    alt="path_follower 2"
    style={{ maxWidth: "100%", borderRadius: "8px", marginBottom: "1rem" }}
  />
  <img
    src="/Documentation-TRC2k25-TEAM-ROBOSTIM/img/ros/6.png"
    alt="path_follower 3"
    style={{ maxWidth: "100%", borderRadius: "8px" }}
  />
</div>

---

## 6. √âvitement d'Obstacles

L'√©vitement d'obstacles utilise un capteur LIDAR simul√© publiant sur le topic `/scan`.

### Caract√©ristiques

- **Champ de vision** : ~180¬∞
- **Zone de d√©tection frontale** : ¬±15¬∞ autour de l'axe avant
- **Distance de s√©curit√©** : 0.4 m
- **Action** : Arr√™t imm√©diat si obstacle d√©tect√©

### Type de message

`sensor_msgs/LaserScan` fournissant les distances pour chaque angle.

<InfoCard type="info" title="Am√©lioration possible" icon="üí°">
  Ce syst√®me pourrait √™tre am√©lior√© avec une replanification dynamique ou un
  algorithme de contournement automatique.
</InfoCard>

---

## 7. Simulation & Visualisation {#visualisation}

### Gazebo Classic

La simulation est r√©alis√©e dans un monde appel√© `maze_4_metal_6x6.world`, repr√©sentant un labyrinthe avec :

- Couloirs √©troits
- Intersections multiples
- Position initiale d√©finie dans `simulation.launch.py`

<div style={{ textAlign: "center", margin: "2rem 0" }}>
  <p>
    <strong>Visualisation dans Gazebo</strong>
  </p>
  <img
    src="/Documentation-TRC2k25-TEAM-ROBOSTIM/img/ros/2.png"
    alt="Gazebo simulation"
    style={{
      maxWidth: "100%",
      borderRadius: "8px",
      boxShadow: "0 4px 6px rgba(0,0,0,0.1)",
    }}
  />
</div>

### RViz2

Visualisation en temps r√©el de :

- `/scan` (laser)
- `/odom` (odom√©trie)
- `/planned_path` (chemin g√©n√©r√©)
- Mod√®le URDF du robot
- TF (transformations)

<InfoCard type="warning" title="Configuration importante" icon="‚öôÔ∏è">
  Configurer le `Fixed Frame` en `odom` pour garantir une visualisation
  coh√©rente.
</InfoCard>

---

## 8. Lancement {#lancement}

### Lancement complet

Le syst√®me peut √™tre d√©marr√© avec un seul fichier :

```bash
ros2 launch pathfinding_robot simulation.launch.py
```

Ce fichier regroupe tous les composants :

- Insertion du robot dans Gazebo
- D√©marrage des n≈ìuds de planification
- Suivi et √©vitement

### Lancement individuel des n≈ìuds

Pour des tests cibl√©s :

```bash
# Planificateur de chemin
ros2 run pathfinding_robot path_planner

# Suiveur de chemin
ros2 run pathfinding_robot path_follower
```

<InfoCard type="info" title="Conseil" icon="üí°">
  Assurez-vous que Gazebo est bien lanc√© et que le robot est charg√© avant
  d'activer ces composants manuellement.
</InfoCard>

---

## 9. Difficult√©s Rencontr√©es & Solutions {#problemes}

### Probl√®me 1 : √âcran noir dans RViz2

**Sympt√¥me** : L'√©cran RViz2 reste noir, ne montrant que le quadrillage.

**Solution** : Configurer correctement le champ `Fixed Frame` en `odom`.

### Probl√®me 2 : Absence de chemin A\*

**Sympt√¥me** : L'algorithme A\* ne retourne aucun chemin.

**Cause** : Mauvais positionnement initial du robot (hors de la grille virtuelle).

**Solution** : Ajuster les coordonn√©es `x_init` et `y_init` dans le fichier de lancement.

---

## 10. Visualisation recommand√©e dans RViz2

### Configuration optimale

<Table
  headers={["√âl√©ment", "Type", "Description"]}
  data={[
    ["Fixed Frame", "odom", "Coh√©rence temporelle des donn√©es"],
    ["RobotModel", "Display", "Structure du TekBot et liaisons"],
    ["LaserScan", "Display", "Mesures LIDAR en temps r√©el"],
    ["Path", "Display", "Waypoints √† suivre"],
    ["TF", "Display", "Transformations entre frames"],
    ["Odometry", "Display", "Position et orientation calcul√©e"],
  ]}
/>

<div style={{ textAlign: "center", margin: "2rem 0" }}>
  <p>
    <strong>Visualisation dans RViz2</strong>
  </p>
  <img
    src="/Documentation-TRC2k25-TEAM-ROBOSTIM/img/ros/1png.png"
    alt="RViz visualization"
    style={{
      maxWidth: "100%",
      borderRadius: "8px",
      boxShadow: "0 4px 6px rgba(0,0,0,0.1)",
    }}
  />
</div>

---

## 11. Conclusion & Am√©liorations Possibles

Ce projet de navigation autonome avec ROS 2 a permis de mettre en ≈ìuvre l'ensemble des briques fonctionnelles n√©cessaires au d√©placement intelligent d'un robot mobile dans un environnement structur√©.

### Points forts

‚úÖ Impl√©mentation compl√®te de A\* pour la planification  
‚úÖ Suivi de chemin efficace avec √©vitement d'obstacles  
‚úÖ S√©paration modulaire des composants ROS 2  
‚úÖ Visualisation compl√®te Gazebo + RViz2

### Am√©liorations possibles

<FeatureGrid
  items={[
    {
      icon: "üîÑ",
      title: "Replanification dynamique",
      description: "Adaptation en temps r√©el",
    },
    {
      icon: "üß≠",
      title: "Int√©gration nav2",
      description: "Stack de navigation compl√®te",
    },
    { icon: "üó∫Ô∏è", title: "SLAM", description: "Avec slam_toolbox" },
    {
      icon: "üéØ",
      title: "Optimisation",
      description: "Performance et robustesse",
    },
  ]}
/>

### Ressources

- üé• [Vid√©o de d√©monstration](/Documentation-TRC2k25-TEAM-ROBOSTIM/img/ros/vid.mp4)
- üìö [Documentation ROS 2 officielle](https://docs.ros.org/en/humble/)

---

<div
  style={{
    textAlign: "center",
    padding: "2rem",
    background: "var(--ifm-color-emphasis-100)",
    borderRadius: "8px",
    marginTop: "3rem",
  }}
>
  <p style={{ margin: 0, fontSize: "0.9rem" }}>
    ¬© 2025 Documentation technique des tests en ROS - Team ROBOSTIM üèÜ TRC 25
  </p>
</div>
